<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Claw 電子蝦 — 使用指南</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans TC', -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background: #f5f5f5;
            color: #222;
            line-height: 1.8;
        }

        /* ── Layout ── */
        .page-wrapper {
            display: flex;
            min-height: 100vh;
        }

        /* ── Sidebar ── */
        .sidebar {
            width: 220px;
            background: #fff;
            border-right: 1px solid #e0e0e0;
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            overflow-y: auto;
            z-index: 100;
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 24px 20px 16px;
            border-bottom: 1px solid #e0e0e0;
        }

        .sidebar-header h2 {
            font-size: 1.1rem;
            font-weight: 700;
            color: #111;
            line-height: 1.4;
        }

        .sidebar-header .subtitle {
            font-size: 0.75rem;
            color: #888;
            margin-top: 4px;
        }

        .sidebar-nav {
            padding: 12px 0;
            flex: 1;
        }

        .sidebar-nav button {
            display: block;
            width: 100%;
            text-align: left;
            padding: 10px 20px;
            border: none;
            background: none;
            font-family: inherit;
            font-size: 0.9rem;
            color: #555;
            cursor: pointer;
            transition: background 0.15s, color 0.15s;
            border-left: 3px solid transparent;
        }

        .sidebar-nav button:hover {
            background: #f7f7f7;
            color: #222;
        }

        .sidebar-nav button.active {
            background: #f0f4ff;
            color: #1a73e8;
            font-weight: 700;
            border-left-color: #1a73e8;
        }

        /* ── Sidebar sub-navigation ── */
        .sidebar-sub-nav {
            display: none;
            padding: 0;
        }

        .sidebar-sub-nav.open {
            display: block;
        }

        .sidebar-sub-nav button {
            display: block;
            width: 100%;
            text-align: left;
            padding: 7px 20px 7px 36px;
            border: none;
            background: none;
            font-family: inherit;
            font-size: 0.82rem;
            color: #777;
            cursor: pointer;
            transition: background 0.15s, color 0.15s;
            border-left: 3px solid transparent;
            position: relative;
        }

        .sidebar-sub-nav button::before {
            content: '';
            position: absolute;
            left: 22px;
            top: 50%;
            width: 6px;
            height: 1px;
            background: #ccc;
        }

        .sidebar-sub-nav button:hover {
            background: #f7f7f7;
            color: #333;
        }

        .sidebar-sub-nav button.active {
            background: #eef2ff;
            color: #1a73e8;
            font-weight: 700;
            border-left-color: #1a73e8;
        }

        .sidebar-nav button .expand-arrow {
            float: right;
            font-size: 0.65rem;
            transition: transform 0.2s;
            color: #aaa;
        }

        .sidebar-nav button.expanded .expand-arrow {
            transform: rotate(90deg);
        }

        .sidebar-footer {
            padding: 12px 20px;
            border-top: 1px solid #e0e0e0;
            font-size: 0.75rem;
            color: #aaa;
        }

        .sidebar-footer a {
            color: #1a73e8;
            text-decoration: none;
        }

        .sidebar-footer a:hover {
            text-decoration: underline;
        }

        /* ── Mobile menu toggle ── */
        .menu-toggle {
            display: none;
            position: fixed;
            top: 12px;
            left: 12px;
            z-index: 200;
            background: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            padding: 8px 12px;
            font-family: inherit;
            font-size: 0.85rem;
            cursor: pointer;
            box-shadow: 0 1px 4px rgba(0,0,0,0.08);
        }

        .menu-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.3);
            z-index: 90;
        }

        /* ── Main content ── */
        .main-content {
            flex: 1;
            margin-left: 220px;
            padding: 40px 20px 60px;
        }

        .content-inner {
            max-width: 720px;
            margin: 0 auto;
            background: #fff;
            border-radius: 8px;
            padding: 40px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.06);
        }

        /* ── Tab panels ── */
        .tab-panel {
            display: none;
        }

        .tab-panel.active {
            display: block;
        }

        /* ── Typography ── */
        .content-inner header {
            margin-bottom: 32px;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 24px;
        }

        .content-inner header h1 {
            font-size: 1.75rem;
            font-weight: 700;
            color: #111;
            line-height: 1.4;
            margin-bottom: 8px;
        }

        .meta {
            font-size: 0.85rem;
            color: #888;
        }

        .content-inner h2 {
            font-size: 1.3rem;
            font-weight: 700;
            color: #111;
            margin-top: 40px;
            margin-bottom: 12px;
        }

        .content-inner h2:first-child {
            margin-top: 0;
        }

        .content-inner h3 {
            font-size: 1.1rem;
            font-weight: 700;
            color: #111;
            margin-top: 32px;
            margin-bottom: 8px;
        }

        .content-inner p {
            font-size: 1rem;
            color: #333;
            margin-bottom: 16px;
        }

        .content-inner a {
            color: #1a73e8;
            text-decoration: none;
        }

        .content-inner a:hover {
            text-decoration: underline;
        }

        .content-inner strong {
            font-weight: 700;
        }

        .step-heading {
            font-size: 1.1rem;
            font-weight: 700;
            color: #111;
            margin-top: 32px;
            margin-bottom: 8px;
        }

        .step-image {
            width: 100%;
            max-width: 360px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            margin: 16px 0;
            display: block;
        }

        .note {
            background: #f7f7f7;
            border-left: 3px solid #666;
            padding: 12px 16px;
            margin: 16px 0;
            font-size: 0.92rem;
            color: #444;
            border-radius: 0 4px 4px 0;
        }

        .warning {
            background: #fff8f0;
            border-left: 3px solid #e67e22;
            padding: 12px 16px;
            margin: 16px 0;
            font-size: 0.92rem;
            color: #444;
            border-radius: 0 4px 4px 0;
        }

        .tips-list {
            margin: 16px 0;
            padding-left: 24px;
            color: #333;
        }

        .tips-list li {
            margin-bottom: 6px;
        }

        hr {
            border: none;
            border-top: 1px solid #e0e0e0;
            margin: 40px 0;
        }

        footer {
            border-top: 1px solid #e0e0e0;
            padding-top: 20px;
            margin-top: 40px;
            font-size: 0.82rem;
            color: #999;
        }

        /* ── Feature table ── */
        .feature-table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0 24px;
            font-size: 0.92rem;
        }

        .feature-table th,
        .feature-table td {
            text-align: left;
            padding: 10px 12px;
            border-bottom: 1px solid #e8e8e8;
        }

        .feature-table th {
            background: #f7f7f7;
            font-weight: 700;
            color: #333;
        }

        .feature-table td:first-child {
            white-space: nowrap;
            font-weight: 700;
            color: #222;
        }

        /* ── Code / pre blocks ── */
        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            border-radius: 6px;
            padding: 16px 20px;
            margin: 16px 0;
            overflow-x: auto;
            font-family: 'SF Mono', 'Fira Code', 'Consolas', monospace;
            font-size: 0.82rem;
            line-height: 1.6;
            white-space: pre;
        }

        .arch-diagram {
            background: #fafafa;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            padding: 20px;
            margin: 16px 0;
            overflow-x: auto;
            font-family: 'SF Mono', 'Fira Code', 'Consolas', monospace;
            font-size: 0.78rem;
            line-height: 1.5;
            white-space: pre;
            color: #333;
        }

        .file-tree {
            background: #fafafa;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            padding: 16px 20px;
            margin: 16px 0;
            overflow-x: auto;
            font-family: 'SF Mono', 'Fira Code', 'Consolas', monospace;
            font-size: 0.82rem;
            line-height: 1.6;
            white-space: pre;
            color: #333;
        }

        /* ── Bullet lists inside panels ── */
        .content-list {
            margin: 12px 0;
            padding-left: 24px;
            color: #333;
        }

        .content-list li {
            margin-bottom: 8px;
            line-height: 1.7;
        }

        /* ── Badge row ── */
        .badge-row {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            margin-bottom: 16px;
        }

        .badge {
            display: inline-block;
            font-size: 0.72rem;
            padding: 3px 8px;
            border-radius: 3px;
            font-weight: 700;
            color: #fff;
        }

        .badge-release { background: #2ea44f; }
        .badge-license { background: #0969da; }
        .badge-android { background: #3ddc84; color: #1a1a1a; }
        .badge-railway { background: #7c3aed; }

        /* ── Mission Control feature cards ── */
        .mc-screenshot {
            width: 100%;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            margin: 16px 0 32px;
            display: block;
        }

        .mc-section {
            margin-top: 40px;
            padding: 24px;
            background: #fafbfc;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
        }

        .mc-section h3 {
            margin-top: 0 !important;
            font-size: 1.15rem;
            color: #111;
            margin-bottom: 12px;
        }

        .mc-section p {
            font-size: 0.92rem;
            color: #444;
            margin-bottom: 12px;
        }

        .mc-feature-list {
            margin: 8px 0 0;
            padding-left: 20px;
            color: #333;
            font-size: 0.92rem;
        }

        .mc-feature-list li {
            margin-bottom: 6px;
            line-height: 1.7;
        }

        .mc-label {
            display: inline-block;
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 3px;
            font-weight: 700;
            margin-left: 8px;
            vertical-align: middle;
        }

        .mc-label-user { background: #e3f2fd; color: #1565c0; }
        .mc-label-bot { background: #fce4ec; color: #c62828; }
        .mc-label-shared { background: #fff3e0; color: #e65100; }

        .mc-api-table {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0;
            font-size: 0.85rem;
        }

        .mc-api-table th,
        .mc-api-table td {
            text-align: left;
            padding: 8px 10px;
            border-bottom: 1px solid #e8e8e8;
        }

        .mc-api-table th {
            background: #f0f0f0;
            font-weight: 700;
            color: #333;
        }

        .mc-api-table code {
            background: #f5f5f5;
            padding: 1px 5px;
            border-radius: 3px;
            font-size: 0.8rem;
        }

        /* ── Responsive ── */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.25s ease;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .menu-toggle {
                display: block;
            }

            .menu-overlay.open {
                display: block;
            }

            .main-content {
                margin-left: 0;
                padding: 60px 12px 40px;
            }

            .content-inner {
                padding: 24px 16px;
                border-radius: 0;
            }

            .content-inner header h1 {
                font-size: 1.4rem;
            }
        }
    </style>
</head>
<body>
    <!-- Mobile menu button -->
    <button class="menu-toggle" id="menuToggle">&#9776; 選單</button>
    <div class="menu-overlay" id="menuOverlay"></div>

    <div class="page-wrapper">
        <!-- Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>E-Claw 電子蝦</h2>
                <div class="subtitle">使用指南 &amp; 開發文件</div>
            </div>
            <div class="sidebar-nav">
                <button class="active" data-tab="setup">設定教學</button>
                <button data-tab="features">功能介紹</button>
                <button data-tab="architecture">系統架構</button>
                <button data-tab="quickstart">快速開始</button>
                <button data-tab="structure">專案結構</button>
                <button data-tab="mission" id="missionToggle">任務中心 <span class="expand-arrow">&#9654;</span></button>
                <div class="sidebar-sub-nav" id="missionSubNav">
                    <button data-tab="mission-overview">總覽</button>
                    <button data-tab="mission-todo">待辦事項</button>
                    <button data-tab="mission-list">任務列表</button>
                    <button data-tab="mission-done">已完成</button>
                    <button data-tab="mission-notes">筆記</button>
                    <button data-tab="mission-skills">Skills</button>
                    <button data-tab="mission-soul">靈魂</button>
                    <button data-tab="mission-rules">規則</button>
                    <button data-tab="mission-schedule">排程</button>
                </div>
                <button data-tab="testing">測試與文件</button>
            </div>
            <div class="sidebar-footer">
                <a href="https://play.google.com/store/apps/details?id=com.hank.clawlive">Google Play 下載</a>
                <br>
                <a href="https://github.com/HankHuang0516/realbot">GitHub Repo</a>
            </div>
        </nav>

        <!-- Main content -->
        <main class="main-content">
            <div class="content-inner">

                <!-- ══════════════ Tab 1: 設定教學 ══════════════ -->
                <div class="tab-panel active" id="tab-setup">
                    <header>
                        <h1>如何免費使用 OpenClaw — E-Claw App 設定教學</h1>
                        <p class="meta">2026 年 2 月 ｜ 圖文教學</p>
                    </header>

                    <article>
                        <h2>OpenClaw 是什麼？</h2>
                        <p>OpenClaw 是一個 AI Agent，可以理解為一個能夠自主執行任務的 AI 助手，而不只是單純的語言模型。透過 <strong>E-Claw</strong> 這款 App，你可以免費使用 OpenClaw 提供的功能。</p>
                        <p>具體來說，E-Claw 的「官方 Bot 租用」功能提供了一個免費方案，搭載 <strong>MiniMax 2.1</strong> 模型，每天有 15 則訊息的額度。以下是完整的設定流程。</p>

                        <hr>

                        <h2>設定步驟</h2>

                        <h3 class="step-heading">1. 下載 E-Claw App</h3>
                        <p>到 Google Play Store 搜尋「<strong>e-claw</strong>」，安裝 E-Claw 電子蝦桌布 (OpenClaw)。</p>
                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==" alt="Google Play Store 搜尋 E-Claw" class="step-image" id="img1">
                        <div class="note">下載連結放在文末。</div>

                        <h3 class="step-heading">2. 找到「官方 Bot 租用」</h3>
                        <p>打開 App 後在主畫面往下滑，找到「<strong>官方 Bot 租用</strong>」按鈕並點進去。</p>
                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==" alt="E-Claw 主畫面" class="step-image" id="img2">

                        <h3 class="step-heading">3. 選擇免費版</h3>
                        <p>進入租用頁面後會看到免費版和月租版兩個選項，選「<strong>免費版</strong>」然後點「<strong>使用免費版</strong>」。</p>
                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==" alt="選擇免費版" class="step-image" id="img3">
                        <div class="note">免費版使用 MiniMax 2.1 模型，與所有免費用戶共享記憶，每天 15 則訊息。</div>

                        <h3 class="step-heading">4. 等待伺服器連接</h3>
                        <p>點擊後 App 會開始連接伺服器，畫面會顯示「<strong>正在與機器人交握中...</strong>」，等一下就好。</p>
                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==" alt="連接伺服器中" class="step-image" id="img4">

                        <h3 class="step-heading">5. 完成連接流程</h3>
                        <p>連接過程中畫面會跑一些 Webhook 測試訊息，建議等流程跑完再離開頁面。</p>
                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==" alt="Webhook 測試" class="step-image" id="img5">
                        <div class="warning">連接過程中不要關閉 App 或切到其他頁面，不然可能會連接失敗。</div>

                        <h3 class="step-heading">6. 看到龍蝦圖示就完成了</h3>
                        <p>畫面出現龍蝦圖示並顯示「<strong>Connected!</strong>」或「<strong>成功啦</strong>」，代表連接成功，可以回主頁開始用了。</p>
                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==" alt="連接成功" class="step-image" id="img6">

                        <hr>

                        <h2>開始使用</h2>
                        <p>回到 E-Claw 主頁，點「<strong>聊天</strong>」就能跟 OpenClaw 對話了。</p>
                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==" alt="聊天畫面" class="step-image" id="img7">
                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==" alt="對話示範" class="step-image" id="img8">

                        <h2>幾點補充</h2>
                        <ul class="tips-list">
                            <li>免費版每天 15 則訊息，用完隔天重置。</li>
                            <li>記憶是所有免費用戶共用的，別丟敏感資料進去。</li>
                            <li>MiniMax 2.1 拿來日常對話、問問題夠用了。</li>
                            <li>如果覺得不夠用，可以考慮月租版，有無限訊息和獨立記憶。</li>
                        </ul>

                        <hr>

                        <p>E-Claw 下載連結：<a href="https://play.google.com/store/apps/details?id=com.hank.clawlive">Google Play Store</a></p>
                    </article>

                    <footer>
                        <p>圖片來源：E-Claw App 截圖 ｜ 2026 年 2 月</p>
                    </footer>
                </div>

                <!-- ══════════════ Tab 2: 功能介紹 ══════════════ -->
                <div class="tab-panel" id="tab-features">
                    <header>
                        <h1>功能介紹</h1>
                        <p class="meta">E-Claw 電子蝦 — 復古電子寵物 × AI 動態桌布</p>
                    </header>

                    <div class="badge-row">
                        <span class="badge badge-android">Android</span>
                        <span class="badge badge-license">MIT License</span>
                        <span class="badge badge-railway">Railway Backend</span>
                    </div>

                    <p>把 90 年代電子雞的靈魂注入你的 Android 桌布——由 AI Bot 驅動，24/7 陪伴你。</p>

                    <h2>功能特色</h2>

                    <table class="feature-table">
                        <thead>
                            <tr>
                                <th>功能</th>
                                <th>說明</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>AI 電子寵物桌布</td>
                                <td>最多 4 個 AI 驅動的實體，在你的動態桌布上自由活動</td>
                            </tr>
                            <tr>
                                <td>OpenClaw Bot 整合</td>
                                <td>透過 Webhook + Exec-curl 與 AI Bot 雙向溝通</td>
                            </tr>
                            <tr>
                                <td>即時聊天</td>
                                <td>長按桌布即可與實體對話，支援完整訊息歷程</td>
                            </tr>
                            <tr>
                                <td>Push 通知</td>
                                <td>Bot 主動推送訊息，instruction-first 格式</td>
                            </tr>
                            <tr>
                                <td>Web 管理介面</td>
                                <td>跨裝置管理實體、查看狀態、遠端控制</td>
                            </tr>
                            <tr>
                                <td>裝置遙測</td>
                                <td>結構化 debug buffer，AI 輔助問題排查</td>
                            </tr>
                            <tr>
                                <td>帳號登入</td>
                                <td>綁定 Google 帳號，重裝後自動恢復資料</td>
                            </tr>
                            <tr>
                                <td>免費 / 付費方案</td>
                                <td>內建 gatekeeper，15 則免費訊息 + 付費無限制</td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- 未來可在此處加入更多功能的詳細用法介紹 -->
                </div>

                <!-- ══════════════ Tab 3: 系統架構 ══════════════ -->
                <div class="tab-panel" id="tab-architecture">
                    <header>
                        <h1>系統架構</h1>
                        <p class="meta">Android App ↔ Backend ↔ OpenClaw Platform</p>
                    </header>

                    <h2>架構總覽</h2>
                    <p>E-Claw 由三個主要部分組成：Android App、後端服務（Railway）、以及 OpenClaw AI 平台（Zeabur）。</p>

                    <div class="arch-diagram">┌─────────────────────┐     ┌──────────────────────┐
│   Android App       │     │   Web Portal         │
│   (Kotlin)          │     │   (HTML/JS)          │
│                     │     │                      │
│  Live Wallpaper     │     │  Entity Management   │
│  Chat UI            │◄────►  Bot Config          │
│  Push Receiver      │     │  Telemetry Viewer    │
└─────────┬───────────┘     └────────┬─────────────┘
          │                          │
          │    HTTPS / REST API      │
          ▼                          ▼
┌─────────────────────────────────────────────────┐
│              Backend (Railway)                   │
│              Node.js + Express                   │
│                                                  │
│  /api/bind      /api/broadcast   /api/transform  │
│  /api/chat      /api/logs        /api/telemetry  │
│                                                  │
│         PostgreSQL (persistent store)            │
└────────────────────────┬────────────────────────┘
                         │  Webhook Push + exec+curl
                         ▼
              ┌──────────────────────┐
              │  OpenClaw Platform   │
              │  (Zeabur)            │
              │                      │
              │  AI Bot Instances    │
              │  (up to 4 per device)│
              └──────────────────────┘</div>

                    <h2>核心設計</h2>
                    <ul class="content-list">
                        <li>每個裝置有 <strong>4 個 entity slots</strong>（0–3），可獨立綁定不同 Bot</li>
                        <li><strong>Bots</strong> 透過 Webhook push（進入）+ exec+curl（POST /api/transform）進行通訊</li>
                        <li><strong>Railway</strong> 在 push 到 <code>main</code> 時自動部署（監控 <code>backend/</code> 資料夾）</li>
                    </ul>

                    <!-- 未來可在此處加入更多架構細節與用法介紹 -->
                </div>

                <!-- ══════════════ Tab 4: 快速開始 ══════════════ -->
                <div class="tab-panel" id="tab-quickstart">
                    <header>
                        <h1>快速開始</h1>
                        <p class="meta">本地開發、部署、Android App 安裝</p>
                    </header>

                    <h2>先決條件</h2>
                    <ul class="content-list">
                        <li>Android 8.0+ 裝置</li>
                        <li>Node.js 18+</li>
                        <li>PostgreSQL（或使用 Railway 的託管 PostgreSQL）</li>
                    </ul>

                    <h2>本地後端開發</h2>
                    <div class="code-block"># Clone the repo
git clone https://github.com/HankHuang0516/realbot.git
cd realbot/backend

# Install dependencies
npm install

# Configure environment
cp .env.example .env   # then fill in DATABASE_URL, etc.

# Start dev server
npm run dev
# → Server running on http://localhost:3000</div>

                    <h2>部署到 Railway</h2>
                    <div class="code-block"># Connect repo to Railway (auto-deploys from backend/ on push to main)
# Set environment variables in Railway dashboard:
#   DATABASE_URL  PORT  NODE_ENV
git push origin main</div>

                    <h2>Android App 安裝</h2>
                    <ol class="content-list">
                        <li>從 <a href="https://github.com/HankHuang0516/realbot/releases/latest">GitHub Releases</a> 下載最新的 <code>.aab</code> / <code>.apk</code></li>
                        <li>設定為 Live Wallpaper → Long Settings → 輸入你的 <code>deviceId</code></li>
                        <li>打開 Web Portal 綁定 AI 實體</li>
                    </ol>

                    <!-- 未來可在此處加入更多開發與部署的用法介紹 -->
                </div>

                <!-- ══════════════ Tab 5: 專案結構 ══════════════ -->
                <div class="tab-panel" id="tab-structure">
                    <header>
                        <h1>專案結構</h1>
                        <p class="meta">realbot 原始碼目錄說明</p>
                    </header>

                    <h2>目錄總覽</h2>
                    <div class="file-tree">realbot/
├── app/                    # Android app (Kotlin)
│   └── src/main/
│       ├── java/           # App source code
│       └── res/            # Resources, layouts, strings
├── backend/                # Node.js backend (Railway)
│   ├── index.js            # Express server entry point
│   ├── public/             # Web Portal (HTML/JS/CSS)
│   ├── device-telemetry.js # Telemetry buffer module
│   └── tests/              # Regression test suite
├── google_play/            # Store assets (icon, feature graphic)
├── RELEASE_HISTORY.md      # Version history with commit hashes
├── PRIVACY_POLICY.md       # Privacy policy
└── CLAUDE.md               # AI assistant instructions</div>

                    <h2>主要模組說明</h2>
                    <ul class="content-list">
                        <li><strong>app/</strong> — Android 應用程式，使用 Kotlin 開發，包含 Live Wallpaper、聊天介面、Push 接收器</li>
                        <li><strong>backend/</strong> — Node.js + Express 後端，部署於 Railway，負責 API、資料庫、與 OpenClaw 平台通訊</li>
                        <li><strong>backend/public/</strong> — Web Portal 前端，提供跨裝置的實體管理介面</li>
                        <li><strong>backend/tests/</strong> — 回歸測試套件，確保 Bot API 與廣播功能正常運作</li>
                        <li><strong>google_play/</strong> — Google Play Store 上架素材（圖標、功能圖片）</li>
                    </ul>

                    <!-- 未來可在此處加入更多結構細節與用法介紹 -->
                </div>

                <!-- ══════════════ Tab: 任務中心 — 總覽 ══════════════ -->
                <div class="tab-panel" id="tab-mission-overview">
                    <header>
                        <h1>任務中心 (Mission Control)</h1>
                        <p class="meta">Web 管理面板 — 管理 Bot 的待辦、任務、筆記、Skills、靈魂、規則、排程</p>
                    </header>

                    <p>Mission Control 是 E-Claw 的 Web 管理面板，讓你透過瀏覽器跨裝置管理 AI Bot 的所有行為。同一裝置上的所有 Entity（最多 4 個）<strong>共享同一個 Dashboard</strong>，可互相協作。</p>

                    <img src="mission-control-web.png" alt="E-Claw Mission Control Web 介面截圖" class="mc-screenshot" id="mcScreenshot">

                    <h2>功能樹狀圖</h2>
                    <div class="file-tree">任務中心 (Task Center)
├── E-Claw Mission Control (Dashboard)
│   ├── 待辦事項 (TODO)
│   │   ├── 新增待辦
│   │   ├── 指派 Bot / Entity
│   │   ├── 優先順序 (LOW / MEDIUM / HIGH / URGENT)
│   │   ├── 開始任務 → 移至任務列表
│   │   ├── 直接完成 → 移至已完成
│   │   ├── 刪除待辦
│   │   └── Bot 自動操作 (API)
│   ├── 任務列表 (Mission List)
│   │   ├── 狀態追蹤 (IN_PROGRESS)
│   │   ├── 優先順序排序
│   │   ├── 指派資訊
│   │   ├── 標記完成
│   │   └── 退回待辦
│   ├── 已完成 (Done)
│   │   ├── 完成紀錄 (completedAt)
│   │   ├── 歷史回顧
│   │   └── 清理功能
│   ├── 筆記 (Notes)
│   │   ├── 新增筆記
│   │   ├── 分類管理 (category)
│   │   ├── Bot 讀寫 (API)
│   │   ├── 跨 Entity 共享
│   │   └── 用途範例
│   ├── Skills
│   │   ├── 新增 Skill
│   │   ├── 文件連結 (URL)
│   │   ├── 指派 Entity
│   │   ├── 內建 Skill
│   │   └── 多技能管理
│   ├── 靈魂 (Soul / 人設)
│   │   ├── 新增靈魂
│   │   ├── 人格描述
│   │   ├── 範本選擇
│   │   ├── 啟用 / 停用 (isActive)
│   │   ├── 多靈魂混合
│   │   ├── 指派 Entity
│   │   └── 即時生效
│   └── 規則 (Rules / Workflow)
│       ├── 新增規則
│       ├── 規則類型 (6 種)
│       │   ├── WORKFLOW
│       │   ├── CODE_REVIEW
│       │   ├── COMMUNICATION
│       │   ├── DEPLOYMENT
│       │   ├── SYNC
│       │   └── HEARTBEAT
│       ├── 啟用 / 停用 (isEnabled)
│       ├── 指派多個 Entity
│       └── 跨 Entity 管理
└── 排程 (Schedule)
    ├── 頁面操作列
    │   ├── 重新整理
    │   └── + 新增排程
    ├── 即將執行 &amp; 進行中
    │   └── 排程卡片
    │       ├── 執行時間
    │       ├── 目標 Entity
    │       ├── 任務名稱 / 內容
    │       ├── 狀態標籤 (等待中 / 執行中 / 已完成 / 失敗)
    │       ├── 建立時間
    │       └── 取消 / 刪除
    └── 執行紀錄
        └── 歷史紀錄列表
            ├── 執行時間
            ├── 目標 Entity
            ├── 任務名稱
            └── 執行結果</div>

                    <h2>子項目總覽</h2>
                    <table class="feature-table">
                        <thead>
                            <tr><th>子項目</th><th>說明</th><th>存取權限</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>待辦事項</td><td>管理尚未開始的工作項目，支援優先順序與 Entity 指派</td><td>User + Bot 共用</td></tr>
                            <tr><td>任務列表</td><td>追蹤進行中的任務，按優先順序排序顯示</td><td>User + Bot 共用</td></tr>
                            <tr><td>已完成</td><td>歸檔已完成項目，附帶完成時間戳記</td><td>User + Bot 共用</td></tr>
                            <tr><td>筆記</td><td>記錄參考資訊，支援分類管理與跨 Entity 共享</td><td>User + Bot 共用</td></tr>
                            <tr><td>Skills</td><td>擴充 Bot 能力，附帶 API 文件 URL</td><td>Bot 能力擴充</td></tr>
                            <tr><td>靈魂</td><td>定義 Bot 人格特質與溝通風格</td><td>User 定義人格</td></tr>
                            <tr><td>規則</td><td>制定行為準則與自動化工作流程，支援 6 種規則類型</td><td>User 定義行為</td></tr>
                            <tr><td>排程</td><td>定時執行任務，支援即時狀態追蹤與執行紀錄</td><td>User + Bot 共用</td></tr>
                        </tbody>
                    </table>

                    <h2>Dashboard 同步機制</h2>
                    <p>Mission Control Dashboard 使用<strong>版本號（version）</strong>做樂觀鎖定。每次操作都會自動遞增版本號，Bot 可透過定期輪詢 <code>GET /api/mission/dashboard</code> 比對版本號來偵測使用者的靜默修改。</p>
                    <div class="note">建議 Bot 每 15 分鐘輪詢一次 Dashboard，比對 <code>version</code> 欄位，若版本變更則重新讀取所有項目。這能確保 Bot 即時回應使用者在 Web 面板上的操作。</div>
                </div>

                <!-- ══════════════ Tab: 任務中心 — 待辦事項 ══════════════ -->
                <div class="tab-panel" id="tab-mission-todo">
                    <header>
                        <h1>待辦事項 (TODO)</h1>
                        <p class="meta">任務中心 &gt; 待辦事項 <span class="mc-label mc-label-shared">User + Bot 共用</span></p>
                    </header>

                    <p>待辦事項列表用來管理「尚未開始」的工作項目。使用者可以從 Web 面板新增，Bot 也可以透過 API 自行新增。</p>

                    <h2>功能樹狀圖</h2>
                    <div class="file-tree">待辦事項 (TODO)
├── 新增待辦
│   ├── 設定標題
│   ├── 設定描述
│   └── 設定優先順序 (LOW / MEDIUM / HIGH / URGENT)
├── 指派 Bot / Entity
│   ├── 指派給單一 Entity
│   └── 同時指派給多個 Entity
├── 狀態流轉
│   ├── 開始任務 → 移至任務列表 (IN_PROGRESS)
│   ├── 直接完成 → 移至已完成 (DONE)
│   └── 刪除待辦 → 移除項目
└── Bot 自動操作
    ├── API 新增待辦
    ├── API 更新待辦
    └── API 刪除待辦</div>

                    <h2>功能明細</h2>
                    <table class="feature-table">
                        <thead><tr><th>功能</th><th>說明</th></tr></thead>
                        <tbody>
                            <tr><td>新增待辦</td><td>點擊「+ 新增」按鈕建立項目，可設定標題、描述、優先順序（LOW / MEDIUM / HIGH / URGENT）</td></tr>
                            <tr><td>指派 Bot</td><td>每個待辦可指派給特定 Entity（如 Entity 0、Entity 1），或同時指派給多個 Entity</td></tr>
                            <tr><td>開始任務</td><td>將待辦移至「任務列表」（狀態轉為 IN_PROGRESS）</td></tr>
                            <tr><td>直接完成</td><td>跳過任務階段，直接標記為完成並移至「已完成」</td></tr>
                            <tr><td>刪除待辦</td><td>移除不再需要的項目</td></tr>
                            <tr><td>Bot 自動操作</td><td>Bot 可透過 API 新增、更新、刪除待辦，並即時反映在面板上</td></tr>
                        </tbody>
                    </table>

                    <h2>API 端點</h2>
                    <table class="mc-api-table">
                        <thead><tr><th>操作</th><th>API</th></tr></thead>
                        <tbody>
                            <tr><td>新增</td><td><code>POST /api/mission/todo/add</code></td></tr>
                            <tr><td>更新</td><td><code>POST /api/mission/todo/update</code></td></tr>
                            <tr><td>開始</td><td><code>POST /api/mission/todo/start</code></td></tr>
                            <tr><td>完成</td><td><code>POST /api/mission/todo/done</code></td></tr>
                            <tr><td>刪除</td><td><code>POST /api/mission/todo/delete</code></td></tr>
                        </tbody>
                    </table>
                </div>

                <!-- ══════════════ Tab: 任務中心 — 任務列表 ══════════════ -->
                <div class="tab-panel" id="tab-mission-list">
                    <header>
                        <h1>任務列表 (Mission List)</h1>
                        <p class="meta">任務中心 &gt; 任務列表 <span class="mc-label mc-label-shared">User + Bot 共用</span></p>
                    </header>

                    <p>顯示目前「進行中」的任務。當一個待辦項目被「開始」後，會自動移到這裡，狀態為 IN_PROGRESS。</p>

                    <h2>功能樹狀圖</h2>
                    <div class="file-tree">任務列表 (Mission List)
├── 狀態追蹤
│   ├── 即時顯示執行狀態
│   └── Bot 處理中自動更新
├── 優先順序排序
│   └── URGENT → HIGH → MEDIUM → LOW
├── 指派資訊
│   └── 顯示負責的 Entity
├── 標記完成
│   └── 移至「已完成」區塊
└── 退回待辦
    └── 暫停任務，退回待辦清單</div>

                    <h2>功能明細</h2>
                    <table class="feature-table">
                        <thead><tr><th>功能</th><th>說明</th></tr></thead>
                        <tbody>
                            <tr><td>狀態追蹤</td><td>即時顯示每個任務的執行狀態，Bot 處理中會自動更新</td></tr>
                            <tr><td>優先順序排序</td><td>任務按 URGENT → HIGH → MEDIUM → LOW 排序顯示</td></tr>
                            <tr><td>指派資訊</td><td>顯示該任務由哪個 Entity 負責執行</td></tr>
                            <tr><td>標記完成</td><td>任務完成後移至「已完成」區塊</td></tr>
                            <tr><td>退回待辦</td><td>如果任務需要暫停，可退回待辦清單</td></tr>
                        </tbody>
                    </table>
                </div>

                <!-- ══════════════ Tab: 任務中心 — 已完成 ══════════════ -->
                <div class="tab-panel" id="tab-mission-done">
                    <header>
                        <h1>已完成 (Done)</h1>
                        <p class="meta">任務中心 &gt; 已完成</p>
                    </header>

                    <p>所有已完成的待辦與任務會歸檔到這裡，附帶完成時間戳記，方便追蹤歷史紀錄。</p>

                    <h2>功能樹狀圖</h2>
                    <div class="file-tree">已完成 (Done)
├── 完成紀錄
│   └── 記錄 completedAt 時間戳
├── 歷史回顧
│   └── 確認 Bot 過去執行的任務
└── 清理功能
    └── 刪除不再需要的歷史紀錄</div>

                    <h2>功能明細</h2>
                    <table class="feature-table">
                        <thead><tr><th>功能</th><th>說明</th></tr></thead>
                        <tbody>
                            <tr><td>完成紀錄</td><td>每個完成項目都記錄 <code>completedAt</code> 時間戳</td></tr>
                            <tr><td>歷史回顧</td><td>方便確認 Bot 過去執行了哪些任務</td></tr>
                            <tr><td>清理功能</td><td>可刪除不再需要的歷史紀錄</td></tr>
                        </tbody>
                    </table>
                </div>

                <!-- ══════════════ Tab: 任務中心 — 筆記 ══════════════ -->
                <div class="tab-panel" id="tab-mission-notes">
                    <header>
                        <h1>筆記 (Notes)</h1>
                        <p class="meta">任務中心 &gt; 筆記 <span class="mc-label mc-label-shared">User + Bot 共用</span></p>
                    </header>

                    <p>筆記功能讓使用者和 Bot 都能記錄參考資訊。適合存放備忘、偏好設定、對話摘要等。</p>

                    <h2>功能樹狀圖</h2>
                    <div class="file-tree">筆記 (Notes)
├── 新增筆記
│   ├── 設定標題
│   ├── 設定內容
│   └── 設定分類 (category)
├── 分類管理
│   ├── 預設分類: general
│   └── 自訂分類標籤
├── Bot 讀寫
│   ├── API 讀取筆記
│   ├── API 新增筆記
│   ├── API 更新筆記
│   └── API 刪除筆記
├── 跨 Entity 共享
│   └── 同裝置所有 Entity 皆可存取
└── 用途範例
    ├── 使用者偏好紀錄
    ├── 對話摘要
    ├── Bot 工作日誌
    └── 設定備忘</div>

                    <h2>功能明細</h2>
                    <table class="feature-table">
                        <thead><tr><th>功能</th><th>說明</th></tr></thead>
                        <tbody>
                            <tr><td>新增筆記</td><td>點擊「+ 新增」建立筆記，包含標題、內容、分類（category）</td></tr>
                            <tr><td>分類管理</td><td>可自訂分類標籤（預設 <code>general</code>），方便歸類</td></tr>
                            <tr><td>Bot 讀寫</td><td>Bot 可透過 API 讀取、新增、更新、刪除筆記</td></tr>
                            <tr><td>跨 Entity 共享</td><td>同一裝置的所有 Entity 都能存取所有筆記</td></tr>
                            <tr><td>用途範例</td><td>使用者偏好紀錄、對話摘要、Bot 工作日誌、設定備忘</td></tr>
                        </tbody>
                    </table>

                    <h2>API 端點</h2>
                    <table class="mc-api-table">
                        <thead><tr><th>操作</th><th>API</th></tr></thead>
                        <tbody>
                            <tr><td>列表</td><td><code>GET /api/mission/notes</code></td></tr>
                            <tr><td>新增</td><td><code>POST /api/mission/note/add</code></td></tr>
                            <tr><td>更新</td><td><code>POST /api/mission/note/update</code></td></tr>
                            <tr><td>刪除</td><td><code>POST /api/mission/note/delete</code></td></tr>
                        </tbody>
                    </table>
                </div>

                <!-- ══════════════ Tab: 任務中心 — Skills ══════════════ -->
                <div class="tab-panel" id="tab-mission-skills">
                    <header>
                        <h1>Skills</h1>
                        <p class="meta">任務中心 &gt; Skills <span class="mc-label mc-label-bot">Bot 能力擴充</span></p>
                    </header>

                    <p>Skills 定義 Bot 可以使用的外部技能或 API 文件。每個 Skill 可附帶文件 URL，讓 Bot 學習如何使用該技能。</p>

                    <h2>功能樹狀圖</h2>
                    <div class="file-tree">Skills
├── 新增 Skill
│   ├── 設定標題
│   └── 設定文件 URL
├── 文件連結
│   └── 指向 API 文件或使用說明
├── 指派 Entity
│   └── 指定哪些 Entity 具備此技能
├── 內建 Skill
│   └── E-Claw API Skill (預設)
└── 多技能管理
    └── 一個 Bot 可擁有多個 Skill</div>

                    <h2>功能明細</h2>
                    <table class="feature-table">
                        <thead><tr><th>功能</th><th>說明</th></tr></thead>
                        <tbody>
                            <tr><td>新增 Skill</td><td>點擊「+ Add」建立技能，設定標題、文件 URL</td></tr>
                            <tr><td>文件連結</td><td>每個 Skill 可附帶 <code>url</code> 指向 API 文件或使用說明</td></tr>
                            <tr><td>指派 Entity</td><td>可指定哪些 Entity 具備此技能（如只有 Entity 0 有天氣查詢能力）</td></tr>
                            <tr><td>內建 Skill</td><td>預設包含「E-Claw API Skill」，指向 E-Claw 自身的 API 文件</td></tr>
                            <tr><td>多技能管理</td><td>一個 Bot 可擁有多個 Skill，擴展不同能力</td></tr>
                        </tbody>
                    </table>

                    <h2>API 端點</h2>
                    <table class="mc-api-table">
                        <thead><tr><th>操作</th><th>API</th></tr></thead>
                        <tbody>
                            <tr><td>新增</td><td><code>POST /api/mission/skill/add</code></td></tr>
                            <tr><td>刪除</td><td><code>POST /api/mission/skill/delete</code></td></tr>
                        </tbody>
                    </table>
                </div>

                <!-- ══════════════ Tab: 任務中心 — 靈魂 ══════════════ -->
                <div class="tab-panel" id="tab-mission-soul">
                    <header>
                        <h1>靈魂 (Soul / 人設)</h1>
                        <p class="meta">任務中心 &gt; 靈魂 <span class="mc-label mc-label-user">User 定義人格</span></p>
                    </header>

                    <p>靈魂定義 Bot 的人格特質與溝通風格。使用者可以為每個 Entity 指定不同的人格設定，隨時切換啟用或停用。</p>

                    <h2>功能樹狀圖</h2>
                    <div class="file-tree">靈魂 (Soul / 人設)
├── 新增靈魂
│   ├── 填寫名稱
│   └── 填寫人格描述
├── 人格描述
│   └── 自然語言描述性格、語氣、回應風格
├── 範本選擇
│   ├── friendly (友善)
│   ├── professional (專業)
│   └── 完全自訂
├── 啟用 / 停用
│   └── isActive 開關
├── 多靈魂混合
│   └── 同時啟用多個靈魂，融合特質回應
├── 指派 Entity
│   └── 不同 Entity 使用不同人格
└── 即時生效
    └── 修改後下次回應立即採用</div>

                    <h2>功能明細</h2>
                    <table class="feature-table">
                        <thead><tr><th>功能</th><th>說明</th></tr></thead>
                        <tbody>
                            <tr><td>新增靈魂</td><td>點擊「+ 新增」建立人格設定，填寫名稱與人格描述</td></tr>
                            <tr><td>人格描述</td><td>以自然語言描述 Bot 的性格、語氣、回應風格（如「溫暖、有耐心、用鼓勵的語氣說話」）</td></tr>
                            <tr><td>範本選擇</td><td>可使用預設範本（如 <code>friendly</code>、<code>professional</code>），也可完全自訂</td></tr>
                            <tr><td>啟用 / 停用</td><td>每個靈魂有 <code>isActive</code> 開關，使用者可隨時切換</td></tr>
                            <tr><td>多靈魂混合</td><td>當多個靈魂同時啟用時，Bot 會融合所有啟用靈魂的特質來回應</td></tr>
                            <tr><td>指派 Entity</td><td>不同 Entity 可以有不同的人格設定（如 Entity 0 是「友善助手」，Entity 1 是「嚴謹分析師」）</td></tr>
                            <tr><td>即時生效</td><td>修改後 Bot 在下次回應時立即採用新人格</td></tr>
                        </tbody>
                    </table>

                    <h2>API 端點</h2>
                    <table class="mc-api-table">
                        <thead><tr><th>操作</th><th>API</th></tr></thead>
                        <tbody>
                            <tr><td>列表</td><td><code>GET /api/mission/souls</code></td></tr>
                            <tr><td>新增</td><td><code>POST /api/mission/soul/add</code></td></tr>
                            <tr><td>更新</td><td><code>POST /api/mission/soul/update</code></td></tr>
                            <tr><td>刪除</td><td><code>POST /api/mission/soul/delete</code></td></tr>
                        </tbody>
                    </table>
                </div>

                <!-- ══════════════ Tab: 任務中心 — 規則 ══════════════ -->
                <div class="tab-panel" id="tab-mission-rules">
                    <header>
                        <h1>規則 / Workflow</h1>
                        <p class="meta">任務中心 &gt; 規則 <span class="mc-label mc-label-user">User 定義行為</span></p>
                    </header>

                    <p>規則系統讓使用者為 Bot 制定行為準則和自動化工作流程。可定義多種類型的規則並指派給不同 Entity。</p>

                    <h2>功能樹狀圖</h2>
                    <div class="file-tree">規則 (Rules / Workflow)
├── 新增規則
│   ├── 設定名稱
│   ├── 設定描述
│   └── 設定規則類型
├── 規則類型 (6 種)
│   ├── WORKFLOW — 一般工作流程規則
│   ├── CODE_REVIEW — 程式碼審查相關
│   ├── COMMUNICATION — 溝通與回應規則
│   ├── DEPLOYMENT — 部署相關規則
│   ├── SYNC — 資料同步規則
│   └── HEARTBEAT — 定期檢查規則
├── 啟用 / 停用
│   └── isEnabled 開關 (停用後 Bot 完全忽略)
├── 指派多個 Entity
│   └── 一個規則同時套用到多個 Entity
└── 跨 Entity 管理
    └── 任何 Entity 都可新增或修改規則</div>

                    <h2>功能明細</h2>
                    <table class="feature-table">
                        <thead><tr><th>功能</th><th>說明</th></tr></thead>
                        <tbody>
                            <tr><td>新增規則</td><td>點擊「+ 新增」建立規則，設定名稱、描述、規則類型</td></tr>
                            <tr><td>規則類型</td><td>支援 6 種：WORKFLOW、CODE_REVIEW、COMMUNICATION、DEPLOYMENT、SYNC、HEARTBEAT</td></tr>
                            <tr><td>啟用 / 停用</td><td>每個規則有 <code>isEnabled</code> 開關，停用的規則 Bot 會完全忽略</td></tr>
                            <tr><td>指派多個 Entity</td><td>一個規則可同時套用到多個 Entity（如讓所有 Entity 都遵守某個溝通規則）</td></tr>
                            <tr><td>跨 Entity 管理</td><td>任何 Entity 都可以新增或修改規則，不限於自己被指派的</td></tr>
                        </tbody>
                    </table>

                    <h2>API 端點</h2>
                    <table class="mc-api-table">
                        <thead><tr><th>操作</th><th>API</th></tr></thead>
                        <tbody>
                            <tr><td>新增</td><td><code>POST /api/mission/rule/add</code></td></tr>
                            <tr><td>更新</td><td><code>POST /api/mission/rule/update</code></td></tr>
                            <tr><td>刪除</td><td><code>POST /api/mission/rule/delete</code></td></tr>
                        </tbody>
                    </table>
                </div>

                <!-- ══════════════ Tab: 任務中心 — 排程 ══════════════ -->
                <div class="tab-panel" id="tab-mission-schedule">
                    <header>
                        <h1>排程 (Schedule)</h1>
                        <p class="meta">任務中心 &gt; 排程 <span class="mc-label mc-label-shared">User + Bot 共用</span></p>
                    </header>

                    <p>排程功能讓使用者和 Bot 設定定時執行的任務。可在指定時間自動觸發任務，並追蹤每次執行的狀態與結果。</p>

                    <img src="sech_web.jpg" alt="E-Claw 排程 Web 介面截圖" class="mc-screenshot">

                    <h2>功能樹狀圖</h2>
                    <div class="file-tree">排程 (Schedule)
├── 頁面操作列
│   ├── 重新整理 — 手動刷新排程列表
│   └── + 新增排程 — 建立新的定時任務
│       ├── 設定執行時間
│       ├── 選擇目標 Entity
│       └── 設定任務名稱 / 內容
├── 即將執行 &amp; 進行中
│   └── 排程卡片
│       ├── 執行時間 — 排定的執行時間點 (如 09:00 PM)
│       ├── 目標 Entity — 指派執行的 Entity (如 Lobster #0)
│       ├── 任務名稱 / 內容 — 排程要執行的任務描述
│       ├── 狀態標籤
│       │   ├── 等待中 — 尚未到執行時間
│       │   ├── 執行中 — 正在執行任務
│       │   ├── 已完成 — 執行成功完成
│       │   └── 失敗 — 執行過程發生錯誤
│       ├── 建立時間 — 排程建立的時間戳記
│       └── 取消 / 刪除 — 取消尚未執行的排程
└── 執行紀錄
    └── 歷史紀錄列表
        ├── 執行時間 — 實際執行的時間點
        ├── 目標 Entity — 負責執行的 Entity
        ├── 任務名稱 — 執行的任務描述
        └── 執行結果 — 成功 / 失敗及相關資訊</div>

                    <h2>功能明細</h2>
                    <table class="feature-table">
                        <thead><tr><th>功能</th><th>說明</th></tr></thead>
                        <tbody>
                            <tr><td>新增排程</td><td>點擊「+ 新增排程」建立定時任務，設定執行時間、目標 Entity、任務內容</td></tr>
                            <tr><td>重新整理</td><td>手動刷新排程列表，取得最新狀態</td></tr>
                            <tr><td>執行時間</td><td>設定排程的執行時間點（如 09:00 PM），到時自動觸發</td></tr>
                            <tr><td>目標 Entity</td><td>指定由哪個 Entity 執行此排程任務（如 Lobster #0）</td></tr>
                            <tr><td>任務名稱</td><td>描述排程要執行的任務內容（如「更新後台狀態」）</td></tr>
                            <tr><td>狀態追蹤</td><td>即時顯示排程狀態：等待中、執行中、已完成、失敗</td></tr>
                            <tr><td>建立時間</td><td>記錄排程建立的時間戳（如建立時間: 08:13 PM）</td></tr>
                            <tr><td>取消排程</td><td>取消尚未執行的排程，點擊 x 按鈕移除</td></tr>
                            <tr><td>執行紀錄</td><td>歸檔所有已執行的排程，包含執行時間、目標 Entity、結果</td></tr>
                        </tbody>
                    </table>

                    <h2>排程卡片欄位</h2>
                    <table class="mc-api-table">
                        <thead><tr><th>欄位</th><th>類型</th><th>說明</th></tr></thead>
                        <tbody>
                            <tr><td>執行時間</td><td><code>Time</code></td><td>排定的執行時間，以 12 小時制顯示（如 09:00 PM）</td></tr>
                            <tr><td>目標 Entity</td><td><code>Entity</code></td><td>執行任務的 Entity，顯示名稱與編號（如 Lobster #0）</td></tr>
                            <tr><td>任務內容</td><td><code>String</code></td><td>排程要執行的具體任務描述</td></tr>
                            <tr><td>狀態</td><td><code>Enum</code></td><td>等待中 / 執行中 / 已完成 / 失敗</td></tr>
                            <tr><td>建立時間</td><td><code>Timestamp</code></td><td>排程被建立的時間</td></tr>
                        </tbody>
                    </table>

                    <h2>狀態標籤說明</h2>
                    <table class="feature-table">
                        <thead><tr><th>狀態</th><th>說明</th><th>顏色</th></tr></thead>
                        <tbody>
                            <tr><td>等待中</td><td>排程已建立，尚未到執行時間</td><td>紫色</td></tr>
                            <tr><td>執行中</td><td>已到執行時間，Bot 正在處理任務</td><td>藍色</td></tr>
                            <tr><td>已完成</td><td>任務已成功執行完畢</td><td>綠色</td></tr>
                            <tr><td>失敗</td><td>任務執行過程中發生錯誤</td><td>紅色</td></tr>
                        </tbody>
                    </table>

                    <h2>API 端點</h2>
                    <table class="mc-api-table">
                        <thead><tr><th>操作</th><th>API</th></tr></thead>
                        <tbody>
                            <tr><td>列表</td><td><code>GET /api/mission/schedules</code></td></tr>
                            <tr><td>新增</td><td><code>POST /api/mission/schedule/add</code></td></tr>
                            <tr><td>取消</td><td><code>POST /api/mission/schedule/cancel</code></td></tr>
                            <tr><td>執行紀錄</td><td><code>GET /api/mission/schedule/history</code></td></tr>
                        </tbody>
                    </table>
                </div>

                <!-- ══════════════ Tab 6: 測試與文件 ══════════════ -->
                <div class="tab-panel" id="tab-testing">
                    <header>
                        <h1>測試與文件</h1>
                        <p class="meta">回歸測試、文件連結、貢獻指南</p>
                    </header>

                    <h2>回歸測試</h2>
                    <div class="code-block"># Bot API response rate (target: 90%+)
node backend/tests/test-bot-api-response.js

# Full broadcast flow (delivery, speak-to, chat history)
node backend/tests/test-broadcast.js</div>
                    <div class="note">測試需要在 <code>backend/.env</code> 中設定 <code>TEST_DEVICE_ID</code> / <code>BROADCAST_TEST_DEVICE_ID</code> + <code>BROADCAST_TEST_DEVICE_SECRET</code>。</div>

                    <h2>相關文件</h2>
                    <ul class="content-list">
                        <li><a href="https://github.com/HankHuang0516/realbot/blob/main/PRIVACY_POLICY.md">Privacy Policy 隱私權政策</a></li>
                        <li><a href="https://github.com/HankHuang0516/realbot/blob/main/backend/README.md">Backend API Reference</a></li>
                        <li><a href="https://github.com/HankHuang0516/realbot/blob/main/backend/E-claw_mcp_skill.md">MCP Skill Guide</a></li>
                        <li><a href="https://github.com/HankHuang0516/realbot/blob/main/RELEASE_HISTORY.md">Release History</a></li>
                    </ul>

                    <h2>貢獻指南</h2>
                    <p>這是一個個人/實驗性專案，歡迎提交 Issue 和建議。</p>
                    <ol class="content-list">
                        <li>Fork 此 repo</li>
                        <li>建立 feature branch：<code>git checkout -b feat/your-feature</code></li>
                        <li>提交你的變更</li>
                        <li>先開 Issue 討論，再發 PR</li>
                    </ol>
                    <div class="warning"><strong>Feature Parity Rule</strong>：所有面向使用者的功能必須在 Web Portal 和 Android App 之間保持同步。</div>

                    <h2>授權</h2>
                    <p><a href="https://github.com/HankHuang0516/realbot/blob/main/LICENSE">MIT License</a> &copy; 2026 HankHuang0516</p>

                    <!-- 未來可在此處加入更多測試與文件的用法介紹 -->
                </div>

            </div>
        </main>
    </div>

    <script>
        // Image loading (for setup tab)
        const images = {
            img1: '1000005528.png',
            img2: '1000005517.png',
            img3: '1000005518.png',
            img4: '1000005526.png',
            img5: '1000005527.png',
            img6: '1000005519.png',
            img7: '1000005524.png',
            img8: '1000005525.png'
        };

        Object.keys(images).forEach(key => {
            const img = document.getElementById(key);
            if (img) {
                img.src = images[key];
                img.onerror = function() {
                    this.style.display = 'none';
                };
            }
        });

        // Tab switching
        const mainTabButtons = document.querySelectorAll('.sidebar-nav > button');
        const subTabButtons = document.querySelectorAll('.sidebar-sub-nav button');
        const allNavButtons = document.querySelectorAll('.sidebar-nav button, .sidebar-sub-nav button');
        const tabPanels = document.querySelectorAll('.tab-panel');
        const missionToggle = document.getElementById('missionToggle');
        const missionSubNav = document.getElementById('missionSubNav');

        function clearAllActive() {
            allNavButtons.forEach(b => b.classList.remove('active'));
            tabPanels.forEach(panel => panel.classList.remove('active'));
        }

        function activateTab(tabId, btn) {
            clearAllActive();
            btn.classList.add('active');
            var panel = document.getElementById('tab-' + tabId);
            if (panel) panel.classList.add('active');

            // Close mobile menu
            sidebar.classList.remove('open');
            menuOverlay.classList.remove('open');

            // Scroll to top of content
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Mission Control toggle: expand/collapse sub-nav, default to overview
        missionToggle.addEventListener('click', function() {
            var isOpen = missionSubNav.classList.contains('open');
            if (isOpen) {
                // If clicking again on an already-open mission menu, just collapse it
                missionSubNav.classList.remove('open');
                missionToggle.classList.remove('expanded');
            } else {
                // Expand sub-nav and navigate to overview
                missionSubNav.classList.add('open');
                missionToggle.classList.add('expanded');
                activateTab('mission-overview', missionSubNav.querySelector('[data-tab="mission-overview"]'));
                missionToggle.classList.add('active');
            }
        });

        // Main tab buttons (non-mission)
        mainTabButtons.forEach(function(btn) {
            if (btn.id === 'missionToggle') return; // handled above
            btn.addEventListener('click', function() {
                var tabId = btn.getAttribute('data-tab');
                // Collapse mission sub-nav when switching away
                missionSubNav.classList.remove('open');
                missionToggle.classList.remove('expanded');
                missionToggle.classList.remove('active');
                activateTab(tabId, btn);
            });
        });

        // Sub-tab buttons
        subTabButtons.forEach(function(btn) {
            btn.addEventListener('click', function() {
                var tabId = btn.getAttribute('data-tab');
                activateTab(tabId, btn);
                // Keep mission parent visually active
                missionToggle.classList.add('active');
            });
        });

        // Mobile menu
        const menuToggle = document.getElementById('menuToggle');
        const menuOverlay = document.getElementById('menuOverlay');
        const sidebar = document.getElementById('sidebar');

        menuToggle.addEventListener('click', () => {
            sidebar.classList.toggle('open');
            menuOverlay.classList.toggle('open');
        });

        menuOverlay.addEventListener('click', () => {
            sidebar.classList.remove('open');
            menuOverlay.classList.remove('open');
        });
    </script>
</body>
</html>
